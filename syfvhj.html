<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoPass - Platform NFT & Lingkungan Komunitas Nyampah Bersama</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --secondary: #ffc107;
            --accent: #4caf50;
            --light: #e8f5e9;
            --dark: #1a237e;
            --text: #333;
            --background: #f5f5f5;
            --passport-bg: #f6f8fb;
            --passport-primary: #2242c7;
            --passport-accent: #18b875;
            --passport-text: #40485a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .nav-btn {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background-color: var(--secondary);
            color: var(--dark);
            transform: translateY(-2px);
        }
        
        .panel {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            height: 80vh;
            overflow: auto;
        }
        
        .panel-header {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        pre {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            overflow: auto;
            height: calc(100% - 60px);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            grid-column: 1 / -1;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .card-header {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: var(--dark);
            padding: 10px 20px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            margin-top: 15px;
        }
        
        .btn:hover {
            background-color: #ffb300;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .json-key {
            color: #d73a49;
        }
        
        .json-string {
            color: #032f62;
        }
        
        .json-number {
            color: #005cc5;
        }
        
        .json-boolean {
            color: #6f42c1;
        }
        
        .json-null {
            color: #6a737d;
        }
        
        /* Fitur 2BCycle */
        .section {
            background: #fff;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(0,0,0,0.08);
        }
        
        .nft-gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0;
        }
        
        .nft-gallery img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            margin: 10px;
            border-radius: 5px;
            box-shadow: 0 0 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .nft-gallery img:hover {
            transform: scale(1.05);
        }
        
        .cid-box {
            background-color: #f9f9f9;
            padding: 15px;
            font-family: monospace;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: 15px;
            white-space: pre-wrap;
            line-height: 1.5;
        }
        
        input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            margin: 8px 0;
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        /* Blog Styles */
        .post {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .post h2 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .post .date {
            color: #777;
            font-size: 0.9em;
            margin-bottom: 15px;
            display: block;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #777;
            border-top: 1px solid #eee;
            grid-column: 1 / -1;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Editor Passport Styles */
        .editor-container {
            display: grid;
            grid-template-columns: 280px 1fr 280px;
            gap: 20px;
            height: 80vh;
            padding: 15px;
            box-sizing: border-box;
        }
        
        .editor-toolbox, .editor-properties {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 20px;
            overflow-y: auto;
        }
        
        .editor-preview {
            display: flex;
            flex-direction: column;
            background: var(--passport-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .preview-header {
            background: white;
            padding: 15px 25px;
            border-bottom: 1px solid #eaeaea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: auto;
            padding: 20px;
        }
        
        .toolbox-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .toolbox-title {
            font-size: 1.1rem;
            color: var(--passport-primary);
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-item {
            background: #f8f9ff;
            border: 1px solid #e0e5ff;
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tool-item:hover {
            background: #eef1ff;
            transform: translateY(-2px);
        }
        
        .property-group {
            margin-bottom: 25px;
        }
        
        .property-title {
            font-size: 1.1rem;
            color: var(--passport-text);
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .property-control {
            margin-bottom: 15px;
        }
        
        .property-control label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #555;
        }
        
        .property-control input[type="text"],
        .property-control input[type="color"],
        .property-control input[type="url"],
        .property-control select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
        }
        
        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
            border: 1px solid #ddd;
        }
        
        .passport-container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 7px 36px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 650px;
            overflow: hidden;
            transform: scale(0.85);
            transition: transform 0.3s;
        }
        
        .passport-container.editing {
            transform: scale(0.95);
            box-shadow: 0 10px 50px rgba(0,0,0,0.2);
        }
        
        .editable {
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .editable:hover {
            outline: 2px dashed var(--passport-accent);
        }
        
        .editable.active {
            outline: 2px solid var(--passport-primary);
            background: rgba(34, 66, 199, 0.05);
        }
        
        .btn-icon {
            padding: 8px 12px;
        }
        
        /* NFT Marketplace */
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .nft-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .nft-card:hover {
            transform: translateY(-5px);
        }
        
        .nft-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .nft-info {
            padding: 15px;
        }
        
        .nft-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .nft-price {
            color: var(--accent);
            font-weight: bold;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .editor-container {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .editor-toolbox, .editor-properties {
                height: 300px;
            }
        }
        
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .panel {
                height: auto;
                min-height: 400px;
            }
            
            .nav-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>EcoPass - Platform NFT & Lingkungan</h1>
        <p>Komunitas Nyampah Bersama ¬∑ Transformasi Sampah Menjadi Nilai dengan NFT</p>
        
        <div class="nav-container">
            <button class="nav-btn active" data-tab="dashboard">üè† Dashboard</button>
            <button class="nav-btn" data-tab="passport-editor">üõÇ Editor Passport</button>
            <button class="nav-btn" data-tab="nft-market">üñºÔ∏è NFT Marketplace</button>
            <button class="nav-btn" data-tab="blog-content">üìù Blog</button>
            <button class="nav-btn" data-tab="tools">üß∞ Tools</button>
            <button class="nav-btn" data-tab="community">üë• Komunitas</button>
        </div>
    </header>
    
    <div class="container">
        <!-- Dashboard -->
        <div class="tab-content active" id="dashboard">
            <div class="panel">
                <h2 class="panel-header">Statistik Komunitas</h2>
                <div class="chart-container">
                    <canvas id="communityStatsChart"></canvas>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-header">NFT Terbaru</h2>
                <div class="nft-grid">
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681057-408e52192e55?w=400" alt="Eco Badge" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Eco Badge: Level 1</div>
                            <div class="nft-price">50 NC</div>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681485-0744b080e652?w=400" alt="Plastic Hero" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Plastic Hero</div>
                            <div class="nft-price">120 NC</div>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762680853-1d0f1d4a4d5f?w=400" alt="Carbon Reducer" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Carbon Reducer</div>
                            <div class="nft-price">200 NC</div>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681485-0744b080e652?w=400" alt="Green Innovator" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Green Innovator</div>
                            <div class="nft-price">350 NC</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel" style="grid-column: 1 / -1;">
                <h2 class="panel-header">Aksi Lingkungan Terkini</h2>
                <div class="post">
                    <h2>Kampanye Bersih-Bersih Pantai</h2>
                    <span class="date">15 Agustus 2023</span>
                    <p>Komunitas Nyampah Bersama berhasil mengumpulkan 500kg sampah plastik dari pantai Tanjung Pasir. Partisipan menerima NFT sebagai bukti kontribusi.</p>
                    <button class="btn">Lihat Detail</button>
                </div>
                <div class="post">
                    <h2>Workshop Daur Ulang Kreatif</h2>
                    <span class="date">10 Agustus 2023</span>
                    <p>Workshop daur ulang kreatif telah diikuti oleh 50 anggota komunitas. Hasil karya akan didokumentasikan sebagai NFT gallery.</p>
                    <button class="btn">Lihat Detail</button>
                </div>
            </div>
        </div>
        
        <!-- Editor Passport -->
        <div class="tab-content" id="passport-editor">
            <div class="editor-container">
                <!-- SIDEBAR KIRI - TOOLBOX -->
                <div class="editor-toolbox">
                    <div class="toolbox-section">
                        <h2 class="toolbox-title">üìÅ File</h2>
                        <div class="tool-item" id="btn-new">
                            üÜï Desain Baru
                        </div>
                        <div class="tool-item" id="btn-save">
                            üíæ Simpan Desain
                        </div>
                        <div class="tool-item" id="btn-load">
                            üìÇ Muat Desain
                        </div>
                        <div class="tool-item" id="btn-export">
                            üì§ Ekspor HTML
                        </div>
                    </div>
                    
                    <div class="toolbox-section">
                        <h2 class="toolbox-title">‚úèÔ∏è Elemen</h2>
                        <div class="tool-item" data-element="text">
                            üî§ Tambah Teks
                        </div>
                        <div class="tool-item" data-element="image">
                            üñºÔ∏è Tambah Gambar
                        </div>
                        <div class="tool-item" data-element="badge">
                            ü™ô Tambah Badge
                        </div>
                        <div class="tool-item" data-element="divider">
                            ‚ûñ Tambah Garis
                        </div>
                    </div>
                    
                    <div class="toolbox-section">
                        <h2 class="toolbox-title">üé® Tema</h2>
                        <div class="tool-item" data-theme="default">
                            üé® Tema Default
                        </div>
                        <div class="tool-item" data-theme="dark">
                            üåô Tema Gelap
                        </div>
                        <div class="tool-item" data-theme="professional">
                            üëî Tema Profesional
                        </div>
                        <div class="tool-item" data-theme="vibrant">
                            üåà Tema Cerah
                        </div>
                    </div>
                </div>
                
                <!-- AREA PREVIEW UTAMA -->
                <div class="editor-preview">
                    <div class="preview-header">
                        <h2 style="margin:0;">Editor Passport NFT</h2>
                        <div>
                            <button class="btn btn-icon" id="btn-zoom-out">üîç‚ûñ</button>
                            <button class="btn btn-icon" id="btn-zoom-reset">üîç100%</button>
                            <button class="btn btn-icon" id="btn-zoom-in">üîç‚ûï</button>
                        </div>
                    </div>
                    <div class="preview-area">
                        <!-- PASSPORT PREVIEW AKAN DIMASUKKAN DI SINI -->
                        <div id="passport-preview"></div>
                    </div>
                </div>
                
                <!-- SIDEBAR KANAN - PROPERTI -->
                <div class="editor-properties">
                    <div class="property-group">
                        <h3 class="property-title">‚öôÔ∏è Properti Elemen</h3>
                        <div class="property-control">
                            <label>Jenis Elemen</label>
                            <input type="text" id="element-type" readonly>
                        </div>
                        <div class="property-control" id="text-content-control">
                            <label>Konten</label>
                            <input type="text" id="element-content">
                        </div>
                        <div class="property-control" id="image-url-control">
                            <label>URL Gambar</label>
                            <input type="url" id="element-image">
                        </div>
                        <div class="property-control">
                            <label>Warna Teks</label>
                            <div style="display:flex;gap:10px;">
                                <input type="color" id="element-color" value="#40485a">
                                <span id="color-value">#40485a</span>
                                <div class="color-preview" id="color-preview" style="background:#40485a"></div>
                            </div>
                        </div>
                        <div class="property-control">
                            <label>Ukuran Font</label>
                            <select id="element-font-size">
                                <option value="1em">Normal</option>
                                <option value="1.2em">Sedang</option>
                                <option value="1.4em">Besar</option>
                                <option value="0.9em">Kecil</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="property-group">
                        <h3 class="property-title">üé® Warna Global</h3>
                        <div class="property-control">
                            <label>Background Utama</label>
                            <input type="color" id="global-bg" value="#f6f8fb">
                        </div>
                        <div class="property-control">
                            <label>Warna Primer</label>
                            <input type="color" id="global-primary" value="#2242c7">
                        </div>
                        <div class="property-control">
                            <label>Warna Aksen</label>
                            <input type="color" id="global-accent" value="#18b875">
                        </div>
                        <div class="property-control">
                            <label>Warna Teks</label>
                            <input type="color" id="global-text" value="#40485a">
                        </div>
                    </div>
                    
                    <div class="property-group">
                        <h3 class="property-title">üíæ Simpan & Ekspor</h3>
                        <button class="btn" id="btn-apply-changes">
                            ‚úì Terapkan Perubahan
                        </button>
                        <button class="btn" id="btn-reset-element">
                            ‚Ü∫ Reset Elemen
                        </button>
                        <button class="btn" id="btn-delete-element" style="background-color: #e94353;">
                            üóëÔ∏è Hapus Elemen
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- NFT Marketplace -->
        <div class="tab-content" id="nft-market">
            <div class="panel" style="grid-column: 1 / -1;">
                <h2 class="panel-header">NFT Marketplace</h2>
                <div class="nft-grid">
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681057-408e52192e55?w=400" alt="Eco Badge" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Eco Badge: Level 1</div>
                            <div class="nft-price">50 NC</div>
                            <p>Bukti partisipasi aksi lingkungan dasar</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681485-0744b080e652?w=400" alt="Plastic Hero" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Plastic Hero</div>
                            <div class="nft-price">120 NC</div>
                            <p>Untuk yang mengumpulkan >10kg plastik</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762680853-1d0f1d4a4d5f?w=400" alt="Carbon Reducer" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Carbon Reducer</div>
                            <div class="nft-price">200 NC</div>
                            <p>Mengurangi jejak karbon >1 ton</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681485-0744b080e652?w=400" alt="Green Innovator" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Green Innovator</div>
                            <div class="nft-price">350 NC</div>
                            <p>Penemu solusi daur ulang kreatif</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681057-408e52192e55?w=400" alt="Eco Warrior" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Eco Warrior</div>
                            <div class="nft-price">500 NC</div>
                            <p>Partisipasi di 10+ aksi lingkungan</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                    <div class="nft-card">
                        <img src="https://images.unsplash.com/photo-1639762681485-0744b080e652?w=400" alt="Sustainability Guru" class="nft-image">
                        <div class="nft-info">
                            <div class="nft-title">Sustainability Guru</div>
                            <div class="nft-price">1000 NC</div>
                            <p>Kontributor utama ekosistem hijau</p>
                            <button class="btn">Beli Sekarang</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Blog -->
        <div class="tab-content" id="blog-content">
            <div class="panel" style="grid-column: 1 / -1;">
                <h2 class="panel-header">Blog Komunitas Nyampah Bersama</h2>
                
                <div id="blog-header">
                    <h1>Memuat...</h1>
                    <p id="blog-description"></p>
                </div>
                
                <div id="blog-content"></div>
                
                <div id="blog-footer"></div>
            </div>
        </div>
        
        <!-- Tools -->
        <div class="tab-content" id="tools">
            <div class="panel">
                <h2 class="panel-header">üßÆ Kalkulator Karbon</h2>
                <div class="input-group">
                    <label for="transport">Transportasi (km/hari):</label>
                    <input type="number" id="transport" value="10">
                </div>
                <div class="input-group">
                    <label for="energy">Energi rumah (kWh/hari):</label>
                    <input type="number" id="energy" value="5">
                </div>
                <button class="btn" onclick="calculateCarbon()">Hitung Jejak Karbon</button>
                <p>üåç Jejak Karbon Anda: <strong><span id="carbonResult">-</span></strong> kg CO‚ÇÇ/hari</p>
                
                <div class="input-group">
                    <label for="reduction">Target Pengurangan (%):</label>
                    <input type="number" id="reduction" value="20" min="0" max="100">
                </div>
                <button class="btn" onclick="calculateReduction()">Hitung Target</button>
                <p>üéØ Target Karbon: <strong><span id="targetResult">-</span></strong> kg CO‚ÇÇ/hari</p>
            </div>
            
            <div class="panel">
                <h2 class="panel-header">üìö Jurnal Digital CID + AI</h2>
                <div class="input-group">
                    <label for="cidInput">CID Dokumen:</label>
                    <input type="text" id="cidInput" value="bafybeigdyrxt4jrwx3b5h5i6z7g3m4d5e6f7g8h9i0j">
                </div>
                <button class="btn" onclick="verifyCID()">Verifikasi & Visualisasi</button>
                <div id="cidOutput" class="cid-box">Menunggu input...</div>
                
                <div class="input-group">
                    <label for="nft-address">Alamat Wallet NFT:</label>
                    <input type="text" id="nft-address" placeholder="0x1234...abcd">
                </div>
                <button class="btn" onclick="checkNFT()">Periksa Koleksi NFT</button>
                <div id="nftOutput" class="cid-box">Masukkan alamat wallet...</div>
            </div>
        </div>
        
        <!-- Komunitas -->
        <div class="tab-content" id="community">
            <div class="panel" style="grid-column: 1 / -1;">
                <h2 class="panel-header">üë• Anggota Komunitas</h2>
                <div class="chart-container">
                    <canvas id="membershipChart"></canvas>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-header">Level Keanggotaan</h2>
                <div class="post">
                    <h3>Anggota Umum</h3>
                    <p>Ikut kegiatan komunitas, akses informasi transparan, hak suara pemilihan</p>
                </div>
                <div class="post">
                    <h3>Anggota Aktif</h3>
                    <p>Prioritas pelatihan, hak dipilih dan memilih, pengakuan kontribusi, insentif token</p>
                </div>
                <div class="post">
                    <h3>Pengurus</h3>
                    <p>Delegasi wewenang, dukungan komunitas, akses sumber daya khusus, kepemimpinan proyek</p>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-header">üîî Aktivitas Terkini</h2>
                <div class="post">
                    <h3>Bersih-Bersih Sungai</h3>
                    <p>Sabtu, 26 Agustus 2023</p>
                    <p>Lokasi: Sungai Ciliwung</p>
                    <button class="btn">Daftar Sekarang</button>
                </div>
                <div class="post">
                    <h3>Workshop Daur Ulang</h3>
                    <p>Minggu, 3 September 2023</p>
                    <p>Lokasi: EcoHub Jakarta</p>
                    <button class="btn">Daftar Sekarang</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        ‚ú® EcoPass - Komunitas Nyampah Bersama ¬∑ Transformasi Sampah Menjadi Nilai dengan NFT üíö<br>
        ¬© 2023 - EcoPass Platform - All rights reserved
    </div>

    <!-- Konfigurasi JSON untuk Blog -->
    <script id="blog-config" type="application/json">
    {
        "blog": {
            "title": "Blog Komunitas Nyampah Bersama",
            "description": "Berbagi pengetahuan dan pengalaman dalam mengelola sampah berkelanjutan",
            "author": "Komunitas Nyampah Bersama"
        },
        "posts": [
            {
                "id": 1,
                "title": "Memulai Perjalanan Pengelolaan Sampah",
                "date": "15 Juli 2023",
                "content": "<p>Hari ini kami memulai perjalanan pengelolaan sampah dengan teknologi sederhana tetapi powerful.</p><p>Dengan arsitektur berbasis JSON, kami bisa fokus pada konten tanpa khawatir tentang koding kompleks.</p>"
            },
            {
                "id": 2,
                "title": "Keuntungan Ekonomi Sirkular",
                "date": "22 Juli 2023",
                "content": "<p>Berikut beberapa keuntungan ekonomi sirkular dalam pengelolaan sampah:</p><ul><li>Mengurangi biaya produksi</li><li>Menciptakan lapangan kerja baru</li><li>Mengurangi dampak lingkungan</li><li>Meningkatkan efisiensi sumber daya</li></ul>"
            },
            {
                "id": 3,
                "title": "Rencana Pengembangan Komunitas",
                "date": "5 Agustus 2023",
                "content": "<p>Dengan fondasi yang kuat, kami berencana untuk:</p><ol><li>Menambahkan fitur NFT untuk sertifikasi</li><li>Membuat sistem insentif berbasis token</li><li>Mengintegrasikan dengan platform Web3</li><li>Mengembangkan aplikasi mobile</li></ol>"
            }
        ]
    }
    </script>

    <script>
        // Data desain saat ini
        let currentDesign = {
            elements: {},
            theme: {
                mainBg: '#f6f8fb',
                primary: '#2242c7',
                accent: '#18b875',
                passport: '#40485a'
            }
        };
        
        // Elemen yang sedang dipilih
        let selectedElement = null;
        
        // Fungsi inisialisasi editor
        function initEditor() {
            // Load template passport
            loadTemplate();
            
            // Setup event listeners
            setupEventListeners();
            
            // Set default theme
            updateGlobalTheme();
        }
        
        // Load template passport HTML
        function loadTemplate() {
            const template = `
                <div class="passport-container">
                    <div class="passport-header" style="background: linear-gradient(to right, var(--passport-primary), var(--passport-accent)); padding: 30px; text-align: center; color: white;">
                        <div class="passport-icon editable" data-id="icon" style="font-size: 3em; margin-bottom: 15px;">üõÇ</div>
                        <div class="passport-title editable" data-id="title" style="font-size: 1.8em; font-weight: bold;">NFT Passport: Eco Identity</div>
                        <span class="passport-tag editable" data-id="tag" style="font-size: 1.1em; display: block; margin-top: 10px;">Komunitas Nyampah Bersama</span>
                        <div class="editable" data-id="subtitle" style="font-size: 1.08em; margin-top: 6px">
                            powered by Blockchain & Eco Action
                        </div>
                    </div>
                    
                    <div class="passport-content" style="display: flex; padding: 25px; gap: 20px;">
                        <div class="nft-meta-section" style="flex: 1;">
                            <img src="https://images.unsplash.com/photo-1639762681057-408e52192e55?w=300" 
                                class="nft-img editable" 
                                data-id="nft-image"
                                alt="Eco NFT" 
                                style="width: 100%; border-radius: 12px; margin-bottom: 15px;" />
                            
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <div class="nft-badge editable" data-id="badge1" style="background: var(--passport-primary); color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.9em;">Eco Credential</div>
                                <span class="nft-badge editable" data-id="badge2" style="background: var(--passport-accent); color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.9em;">Verified</span>
                            </div>
                            
                            <div class="nft-attributes" style="margin-bottom: 20px;">
                                <ul style="list-style: none; padding: 0;">
                                    <li class="editable" data-id="name" style="margin-bottom: 8px;"><b>Nama:</b> Muhamad Oky Muhisin</li>
                                    <li class="editable" data-id="community" style="margin-bottom: 8px;"><b>Komunitas:</b> Nyampah Bersama</li>
                                    <li class="editable" data-id="orcid" style="margin-bottom: 8px;"><b>Wallet:</b> 0x1234...abcd</li>
                                    <li class="editable" data-id="registry" style="margin-bottom: 8px;"><b>Registry:</b> EcoPass Registry</li>
                                    <li class="editable" data-id="type" style="margin-bottom: 8px;"><b>Tipe Credential:</b> Eco Contributor</li>
                                    <li class="editable" data-id="date" style="margin-bottom: 8px;"><b>Issued:</b> 10 July 2025</li>
                                </ul>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <a class="nft-link editable" data-id="link1" href="#" target="_blank" style="color: var(--passport-primary); text-decoration: none; display: block; margin-bottom: 5px;">Lihat NFT di Explorer</a>
                                <a class="nft-link editable" data-id="link2" href="#" target="_blank" style="color: var(--passport-primary); text-decoration: none; display: block;">Metadata di IPFS</a>
                            </div>
                            
                            <div class="qr-section" style="margin-top: 20px; text-align: center;">
                                <div class="editable" data-id="qr-text" style="margin-bottom: 10px;"><b>Scan to verify:</b></div>
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=103x103&data=https://ecopass.nyampahbersama.org" 
                                    class="editable" 
                                    data-id="qr-image"
                                    alt="QR NFT" 
                                    style="border-radius: 8px; border: 1px solid #eee;" />
                            </div>
                        </div>
                        
                        <div style="flex: 2">
                            <div class="section-title editable" data-id="utility-title" style="font-size: 1.4em; font-weight: bold; color: var(--passport-primary); margin-bottom: 20px;">Fungsi & Utility NFT Passport</div>
                            
                            <div class="passport-utility-block editable" data-id="utility1" style="background: #f8f9ff; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                                <div class="utility-title" style="font-weight: bold; color: var(--passport-primary); margin-bottom: 5px;">Bukti Keikutsertaan Proyek/Komunitas</div>
                                <div class="utility-desc" style="color: var(--passport-text);">Bagikan NFT ini sebagai bukti digital anggota aktif di komunitas atau proyek lingkungan.</div>
                            </div>
                            
                            <div class="passport-utility-block editable" data-id="utility2" style="background: #f8f9ff; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                                <div class="utility-title" style="font-weight: bold; color: var(--passport-primary); margin-bottom: 5px;">Traceability & Metadata Lingkungan</div>
                                <div class="utility-desc" style="color: var(--passport-text);">Semua kontribusi lingkungan tercatat transparan di IPFS & Blockchain.</div>
                            </div>
                            
                            <div class="passport-utility-block editable" data-id="utility3" style="background: #f8f9ff; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                                <div class="utility-title" style="font-weight: bold; color: var(--passport-primary); margin-bottom: 5px;">Bukti Ownership & Rekam Jejak</div>
                                <div class="utility-desc" style="color: var(--passport-text);">Riwayat kepemilikan dan kontribusi dapat diakses publik.</div>
                            </div>
                            
                            <div class="passport-utility-block editable" data-id="utility4" style="background: #f8f9ff; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                                <div class="utility-title" style="font-weight: bold; color: var(--passport-primary); margin-bottom: 5px;">Akses ke Komunitas Eksklusif</div>
                                <div class="utility-desc" style="color: var(--passport-text);">Gunakan NFT untuk mendapatkan akses ke grup khusus dan event.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="padding: 18px 28px 5px 28px">
                        <div class="section-title editable" data-id="code-title" style="font-size: 1.4em; font-weight: bold; color: var(--passport-primary); margin-bottom: 15px;">Kode Verifikasi Onchain (JavaScript)</div>
                        <div class="code-section" style="background: #f5f7fa; padding: 15px; border-radius: 8px; font-family: monospace; overflow: auto;">
                            <pre class="editable" data-id="code-content" style="margin: 0;">const verifyEcoPass = async (walletAddress) => {
  const provider = new ethers.providers.Web3Provider(window.ethereum);
  const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, provider);
  
  const balance = await contract.balanceOf(walletAddress);
  if (balance > 0) {
    return "Pemilik EcoPass terverifikasi!";
  } else {
    return "Tidak ditemukan EcoPass di wallet ini.";
  }
};</pre>
                        </div>
                    </div>
                    
                    <div class="passport-footer editable" data-id="footer" style="background: #f0f2f5; padding: 15px; text-align: center; color: var(--passport-text); font-size: 0.9em;">
                        EcoPass NFT | Smart Contract: 0xDD4BEa21...DC2869 | Komunitas Nyampah Bersama
                    </div>
                </div>`;
            
            document.getElementById('passport-preview').innerHTML = template;
            initEditableElements();
        }
        
        // Inisialisasi elemen yang bisa diedit
        function initEditableElements() {
            const editables = document.querySelectorAll('.editable');
            
            editables.forEach(el => {
                el.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // Hapus seleksi sebelumnya
                    if (selectedElement) {
                        selectedElement.classList.remove('active');
                    }
                    
                    // Set elemen baru yang dipilih
                    selectedElement = this;
                    this.classList.add('active');
                    
                    // Isi panel properti
                    populatePropertiesPanel(this);
                });
            });
        }
        
        // Isi panel properti dengan data elemen
        function populatePropertiesPanel(element) {
            const type = element.tagName.toLowerCase();
            const id = element.dataset.id || '';
            
            // Set tipe elemen
            document.getElementById('element-type').value = `${type}${id ? ` (${id})` : ''}`;
            
            // Konten khusus tipe elemen
            if (type === 'img') {
                document.getElementById('element-image').value = element.src;
                document.getElementById('image-url-control').classList.remove('hidden');
                document.getElementById('text-content-control').classList.add('hidden');
            } else {
                document.getElementById('element-content').value = 
                    type === 'input' ? element.value : element.textContent;
                document.getElementById('text-content-control').classList.remove('hidden');
                document.getElementById('image-url-control').classList.add('hidden');
            }
            
            // Warna
            const color = getComputedStyle(element).color;
            document.getElementById('element-color').value = rgbToHex(color);
            document.getElementById('color-value').textContent = rgbToHex(color);
            document.getElementById('color-preview').style.backgroundColor = color;
            
            // Ukuran font
            const fontSize = getComputedStyle(element).fontSize;
            document.getElementById('element-font-size').value = fontSize;
        }
        
        // Konversi RGB ke Hex
        function rgbToHex(rgb) {
            const match = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
            if (!match) return '#000000';
            
            const r = parseInt(match[1]).toString(16).padStart(2, '0');
            const g = parseInt(match[2]).toString(16).padStart(2, '0');
            const b = parseInt(match[3]).toString(16).padStart(2, '0');
            
            return `#${r}${g}${b}`;
        }
        
        // Update tema global
        function updateGlobalTheme() {
            document.documentElement.style.setProperty('--passport-bg', currentDesign.theme.mainBg);
            document.documentElement.style.setProperty('--passport-primary', currentDesign.theme.primary);
            document.documentElement.style.setProperty('--passport-accent', currentDesign.theme.accent);
            document.documentElement.style.setProperty('--passport-text', currentDesign.theme.passport);
            
            // Update input color pickers
            document.getElementById('global-bg').value = currentDesign.theme.mainBg;
            document.getElementById('global-primary').value = currentDesign.theme.primary;
            document.getElementById('global-accent').value = currentDesign.theme.accent;
            document.getElementById('global-text').value = currentDesign.theme.passport;
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Event untuk elemen yang bisa diedit
            document.addEventListener('click', (e) => {
                if (!e.target.classList.contains('editable') && selectedElement) {
                    selectedElement.classList.remove('active');
                    selectedElement = null;
                }
            });
            
            // Event untuk properti elemen
            document.getElementById('element-content').addEventListener('input', function() {
                if (selectedElement) {
                    if (selectedElement.tagName === 'INPUT') {
                        selectedElement.value = this.value;
                    } else {
                        selectedElement.textContent = this.value;
                    }
                }
            });
            
            document.getElementById('element-image').addEventListener('input', function() {
                if (selectedElement && selectedElement.tagName === 'IMG') {
                    selectedElement.src = this.value;
                }
            });
            
            document.getElementById('element-color').addEventListener('input', function() {
                if (selectedElement) {
                    selectedElement.style.color = this.value;
                    document.getElementById('color-value').textContent = this.value;
                    document.getElementById('color-preview').style.backgroundColor = this.value;
                }
            });
            
            document.getElementById('element-font-size').addEventListener('change', function() {
                if (selectedElement) {
                    selectedElement.style.fontSize = this.value;
                }
            });
            
            // Event untuk tema global
            document.getElementById('global-bg').addEventListener('input', function() {
                currentDesign.theme.mainBg = this.value;
                updateGlobalTheme();
            });
            
            document.getElementById('global-primary').addEventListener('input', function() {
                currentDesign.theme.primary = this.value;
                updateGlobalTheme();
            });
            
            document.getElementById('global-accent').addEventListener('input', function() {
                currentDesign.theme.accent = this.value;
                updateGlobalTheme();
            });
            
            document.getElementById('global-text').addEventListener('input', function() {
                currentDesign.theme.passport = this.value;
                updateGlobalTheme();
            });
            
            // Event untuk tombol aksi
            document.getElementById('btn-apply-changes').addEventListener('click', function() {
                alert('Perubahan diterapkan!');
            });
            
            document.getElementById('btn-delete-element').addEventListener('click', function() {
                if (selectedElement && confirm('Hapus elemen ini?')) {
                    selectedElement.remove();
                    selectedElement = null;
                }
            });
            
            // Event untuk toolbox
            document.querySelectorAll('.tool-item[data-theme]').forEach(item => {
                item.addEventListener('click', function() {
                    const theme = this.dataset.theme;
                    
                    switch(theme) {
                        case 'dark':
                            currentDesign.theme = {
                                mainBg: '#1a1a2e',
                                primary: '#6a67ce',
                                accent: '#0f3460',
                                passport: '#e6e6e6'
                            };
                            break;
                        case 'professional':
                            currentDesign.theme = {
                                mainBg: '#f0f2f5',
                                primary: '#2c3e50',
                                accent: '#3498db',
                                passport: '#2c3e50'
                            };
                            break;
                        case 'vibrant':
                            currentDesign.theme = {
                                mainBg: '#fff8e1',
                                primary: '#ff5722',
                                accent: '#ff9800',
                                passport: '#5d4037'
                            };
                            break;
                        default:
                            currentDesign.theme = {
                                mainBg: '#f6f8fb',
                                primary: '#2242c7',
                                accent: '#18b875',
                                passport: '#40485a'
                            };
                    }
                    
                    updateGlobalTheme();
                    alert(`Tema "${theme}" diterapkan!`);
                });
            });
            
            // Event untuk zoom
            const passportContainer = document.querySelector('.passport-container');
            let currentZoom = 0.85;
            
            document.getElementById('btn-zoom-in').addEventListener('click', function() {
                currentZoom = Math.min(currentZoom + 0.1, 1.2);
                passportContainer.style.transform = `scale(${currentZoom})`;
            });
            
            document.getElementById('btn-zoom-out').addEventListener('click', function() {
                currentZoom = Math.max(currentZoom - 0.1, 0.5);
                passportContainer.style.transform = `scale(${currentZoom})`;
            });
            
            document.getElementById('btn-zoom-reset').addEventListener('click', function() {
                currentZoom = 0.85;
                passportContainer.style.transform = `scale(${currentZoom})`;
            });
        }
        
        // Fungsi untuk kalkulator karbon
        function calculateCarbon() {
            const km = parseFloat(document.getElementById('transport').value);
            const kWh = parseFloat(document.getElementById('energy').value);
            const carbon = (km * 0.21) + (kWh * 0.5); // estimasi emisi sederhana
            document.getElementById('carbonResult').textContent = carbon.toFixed(2);
        }
        
        function calculateReduction() {
            const carbon = parseFloat(document.getElementById('carbonResult').textContent);
            const reduction = parseFloat(document.getElementById('reduction').value);
            const target = carbon * (1 - reduction/100);
            document.getElementById('targetResult').textContent = target.toFixed(2);
        }
        
        // Fungsi untuk verifikasi CID
        function verifyCID() {
            const cid = document.getElementById('cidInput').value;
            const output = `
‚úÖ CID diverifikasi sebagai arsip aksi digital.
üìÑ ID: ${cid}
üß† AI membaca metadata dan menyarankan klasifikasi:
‚Ä¢ Tipe: Laporan Lapangan ¬∑ üåç
‚Ä¢ Aksi: Edukasi Lingkungan + Distribusi Token
‚Ä¢ Kredensial: NFT gulungan disimpan permanen
üì¨ Status: Siap dicetak & disubmit ke jurnal rakyat!
`;
            document.getElementById('cidOutput').textContent = output;
        }
        
        function checkNFT() {
            const address = document.getElementById('nft-address').value;
            if (!address) {
                document.getElementById('nftOutput').textContent = "Silakan masukkan alamat wallet terlebih dahulu.";
                return;
            }
            
            const output = `
üîç Memeriksa koleksi NFT untuk alamat: ${address}
‚úÖ Ditemukan 3 NFT terkait lingkungan:
1. Eco Badge: Level 1
2. Plastic Hero
3. Green Innovator
üìä Total nilai: 700 NC
üå± Status: Eco Contributor
`;
            document.getElementById('nftOutput').textContent = output;
        }
        
        // Fungsi untuk merender blog
        function renderBlog() {
            try {
                // 1. Ambil konfigurasi JSON
                const config = JSON.parse(document.getElementById('blog-config').textContent);
                
                // 2. Set header
                document.querySelector('#blog-header h1').textContent = config.blog.title;
                document.getElementById('blog-description').textContent = config.blog.description;
                
                // 3. Render postingan
                let postsHTML = '';
                config.posts.forEach(post => {
                    postsHTML += `
                        <article class="post">
                            <h2>${post.title}</h2>
                            <span class="date">${post.date}</span>
                            <div class="content">${post.content}</div>
                        </article>
                    `;
                });
                
                document.getElementById('blog-content').innerHTML = postsHTML;
                
                // 4. Set footer
                document.getElementById('blog-footer').innerHTML = 
                    `<div class="footer">&copy; ${new Date().getFullYear()} ${config.blog.author}</div>`;
                
            } catch (error) {
                console.error("Error rendering blog:", error);
                document.getElementById('blog-content').innerHTML = 
                    `<p class="error">Terjadi kesalahan saat memuat blog. Silakan coba lagi.</p>`;
            }
        }
        
        // Fungsi untuk navigasi tab
        function setupTabs() {
            const tabBtns = document.querySelectorAll('.nav-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Hapus kelas aktif dari semua tab dan tombol
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Tambahkan kelas aktif ke tab yang dipilih
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                    
                    // Inisialisasi editor jika tab passport diakses
                    if (tabId === 'passport-editor' && !document.querySelector('.passport-container')) {
                        initEditor();
                    }
                });
            });
        }
        
        // Fungsi untuk membuat grafik statistik komunitas
        function createCommunityStatsChart() {
            const ctx = document.getElementById('communityStatsChart').getContext('2d');
            const data = {
                labels: ['Anggota', 'Aksi Lingkungan', 'Sampah Terkelola (kg)', 'NFT Diterbitkan', 'Pengurangan CO2 (kg)'],
                datasets: [{
                    label: 'Statistik Komunitas',
                    data: [320, 42, 1560, 185, 240],
                    backgroundColor: [
                        'rgba(46, 125, 50, 0.7)',
                        'rgba(76, 175, 80, 0.7)',
                        'rgba(139, 195, 74, 0.7)',
                        'rgba(255, 193, 7, 0.7)',
                        'rgba(33, 150, 243, 0.7)'
                    ],
                    borderWidth: 1
                }]
            };
            
            new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Statistik Komunitas'
                        }
                    }
                }
            });
        }
        
        // Fungsi untuk membuat grafik keanggotaan
        function createMembershipChart() {
            const ctx = document.getElementById('membershipChart').getContext('2d');
            const data = {
                labels: ['Anggota Umum', 'Anggota Aktif', 'Pengurus'],
                datasets: [{
                    label: 'Jumlah Anggota',
                    data: [220, 75, 25],
                    backgroundColor: [
                        'rgba(46, 125, 50, 0.7)',
                        'rgba(76, 175, 80, 0.7)',
                        'rgba(139, 195, 74, 0.7)'
                    ],
                    borderWidth: 1
                }]
            };
            
            new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', () => {
            // Setup tab navigation
            setupTabs();
            
            // Render blog
            renderBlog();
            
            // Buat visualisasi
            createCommunityStatsChart();
            createMembershipChart();
        });
    </script>
</body>
</html>